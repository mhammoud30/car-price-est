{% extends 'main/base.html' %}

{% block css%}
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> 
    
{% endblock css%}
{% block content %}
<section class="vh-100" style="background-image: url('../../../static/images/overlay.png') ,url('../../../static/images/banner.jpg') ; color: #000;">
  
  <div class= 'container py-5 h-100"'>
      <div class="row d-flex  h-100">
        
          <div class="col">
            <div class="container my-1 py-10">
     
                <div class="col-md-10 col-lg-8">
                     <div class="card text-dark">
                        <div class="card-body p-5">
                          <h4 class="mb-0">{{ convo.name }}</h4>
                          <hr class="my-0" style="height: 1px;" />
                          
                          {% for message in convo_messages  %}
                          {% comment %} <div class="d-flex flex-start">  {% endcomment %}
                            <div class="card-body p-4">
                            <div class="d-flex flex-start">     
                              <div>
                              <h6 class="fw-bold mb-1">{{message.user.name}}</h6>
                              <div class="d-flex align-items-center mb-3">
                              <p class="mb-0">{{message.sent_datatime|timesince}} ago </p>
                              </div>
                              <p class="mb-0"> {{message.text}} </p>
                              {% if message.user == request.user%}
                              <a href="{% url 'delete-message' message.id %}"class="btn btn-danger"> Delete  </a> 
                              {% endif %}
                        
                            </div>
                          </div>
                        </div>
                        <hr class="my-0" />
                           {% endfor %}
           
                        </div>
                     </div>
                     
                     
</div>               
</div>                       
</div>
<div class="col">
  <div class="container my-1 py-10 text-dark">
    <div class="row d-flex ">
      <div class="col-md-10 col-lg-8">
        <div class="card">
          <div class="card-body p-4">
            <div class="d-flex flex-start w-100">
              
                  <div class="w-100">
                   <h5>Send a message</h5>
                  <form method="post">
                    {% csrf_token %}                  
                       <div class="form-outline">
                          <textarea class="form-control" name="message" rows="4"></textarea>
                          <label class="form-label" for="message"></label>
                        </div>
                        <div class="d-flex justify-content-between mt-3">
                          <button type="sumbit" name="send" value="send" class="btn btn-success">
                          Send <i class="fas fa-long-arrow-alt-right ms-1"></i>
                          </button>
                          </form>
                        </div>
                     </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
 
</div>      
</div>   
</section>
{% comment %} <section class="vh-100" style="background-image: url({% static 'images/overlay.png'%}) ,url({% static 'images/banner.jpg'%}) ; color: #000;">
   
  
  </section> {% endcomment %}




  





{% endblock content %}


